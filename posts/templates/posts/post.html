
{% load static %}
  









<div class="card shadow">
    <div class="card-header">
      <a class="text-reset  text-decoration-none" href="{% url "user-profile" post.author.username %}">
        <img class="object-fit-cover rounded-circle profile-image-sm profile-image-lg  me-2" src="{{post.author.profile.avatar}}" alt="{{post.author.profile.name}}"/>
      </a>
      <span>{{post.author.profile.name}}</span>
      <span class="text-secondary">@{{post.author.username}}</span>
    </div>
    <div class="card-body">
      <a href="{% url "post" post.id%}">
        <img class="img-fluid mb-2 w-100" src="{{post.image.url}}"  alt="{{post.title}}">
      </a>
      <p class="card-text">{{post.body}}</p>
      <div>
        {% for tag in post.tags.all %}
          <a href="{% url "category" tag.slug %}" class="btn btn-sm btn-outline-secondary rounded-pill me-2">{{tag.name}}</a>
        {% endfor %}
      </div>
    </div>
    
    <div class="card-footer text-body-secondary">
      <div class="d-flex px-2 justify-content-between">
        <a  
          {% if user.is_authenticated %}
          hx-get={% url "post-like" post.id %}
          {% else %}
            href="{% url "account_login" %}?next={{request.path}}"
          {% endif %}
          class="cursor-pointer text-decoration-none text-reset">
          {% include "posts/partials/likes.html" with model=post %}
        </a>
        <a id="post-comment" href="{% url "post" post.id%}" class="text-decoration-none text-reset">
          {% if post.comments.count %}
            <span>{{post.comments.count}}</span>
            <i class="bi bi-chat "></i>
          {% else %}
            {% if user.is_authenticated %}
            Add comment
            {% endif %}
          {% endif %}
        </a>
        {% if user.is_authenticated and user == post.author %}
          <div class="dropdown-center ">
            <i class="bi bi-three-dots" class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"></i>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url "post-delete" post.id %}">delete</a></li>
              <li><a class="dropdown-item" href="{% url "post-edit" post.id %}">edit</a></li>
            </ul>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
